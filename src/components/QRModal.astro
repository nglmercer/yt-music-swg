---
import QRscan from '@components/SettingsPanel/QRscan.astro';
import ModalAstro from "@components/commons/ModalAstro.astro";
---
<ModalAstro name="QRModal">
    <QRscan />
</ModalAstro>
<script>
    import { emitter } from "@utils/Emitter";
    import { QRCallbackname,QRproxycb } from "./commons/const_emits";
    const ImportAPIURLID = "ImportAPIURL"
    const ImportPROXYURLID = "ImportPROXYURL"
    const ImportAPIURL = document.getElementById(ImportAPIURLID);
    const ImportPROXYURL = document.getElementById(ImportPROXYURLID);
    /*     emitter.on(QRCallbackname, (url) => {
            console.log(QRCallbackname, url);
        }); */

    document.addEventListener('DOMContentLoaded', () => {
        if (!ImportAPIURL || !ImportPROXYURL) return;
            ImportAPIURL.addEventListener("click", () => {
                emitter.emit("open:QRModal");
                emitter.emit("open:QRscan",QRCallbackname);
            });
            ImportPROXYURL.addEventListener("click", () => {
                emitter.emit("open:QRModal");
                emitter.emit("open:QRscan",QRproxycb);
            });
        console.log('DOMContentLoaded');
    });
</script>